language: java
jdk: oraclejdk8
services:
- docker
env:
  QUAY_USER:
    secure: CDJMiAtRddLp2vWMvVLrm9Ghr4l53b2NvhDpW+EoJCRCEUwErUjtL5vEqxmyn+LKCEHdEvauhwQtDWgpOA3/KfZlp8KR+7YmJtr4xv4dzgo9j1+MJ/bo/6J5JxrJw3eqjkg97aiEwisbzk2sAMEUdOa2OFBbBHAkEq3o7MBWtUQh+zd5nGBgqg1/ZVq9R1Gvqg0E52x+RViUihfW+YTy8qcPqwEndnUd0BiClWouX4H5AHs1eDS3ovaxo8wsEddgZWKwIqEItBLanwdhazYYbeSDneVMlTGLRU77QEPLYT2uyBHSNkZ8TYSX2orZHbUokseS6v00KasxURs9HhivghSOrHifuWfYk5Y30PkQAlicyLXZzdulWkPv0fr/WCjTegjVPpqI5MHnfCjM04Xy/8vFFXBnpC0IlPBY/UtlF2VTA42THFbZ9MwzsHfbznFWl5X8b0pTDSfo/lKr//lC5LJJ3wflbid2/bP+oVEaYDvPqQ9AIU9l6Udey+KS9ulmFjoO/L26BKnQVkzXWeqppO1wdkXw4ac0XV6Qllkmwdwoke/CxzIop1npvs3pq0H1zm/bVPgJyFKPu+o6I2/7C/lsudYJLkLWVpiX7emvu5zt9gsKMRKRAReLNHujNzA4weJ03UUzAzHlPLza4Agqo9v6ctN+ABkfhCLw6hqVC2Y=
  QUAY_TOKEN:
    secure: Xxr51e6aLl9QvJqBNVo4fVXBwodwi5L2bU3bvsze0u6+WD91K6iTOlSxEo0FCHJasFCQDJgyUOrE3ezpdHhqP1o1RbYdNUQ2nwLcBXDKjOB59cw7rJ1lYreXn3PNp/ntGiYCRzqNBg0/7jbZdx/X9GQDtMRIFuGAC5GsQ1g4c+EIsQO6OTWOQEFa04cOZTSPxnToi71nB0vb5ypRWJ1nDkpPzitkyo13BUrTvqYtBeaqofgg0k3zj7f5vT3qfp4nQbnoE9KRcxSdznp6YZS3l64CdFjgro/K0LrKpnpPC52I6aqv3gr3TLuA2vfoGK07HQH7mUIDzMtFNg+bHjFLUIyML7viXAOE1Qc/mpmi3F66chb7fhww3r/V1uo8d09hkaPoSHsqrhy0fWekyvPHHbUF5tOvhQtQZUBfxLUzGOg8LwBwMjZLeyB4hTqAH4qOOF98xWXKwIPl1eElSFXlWVPdtmua6qJlye1NvpCTFCKbbkpFMYNpXClF48k6cXhH6tAkoPsbxRNBNrxNEumDgKv7Sg/v8rsMFeN6KF9Gvsl5vbyY2eyeXWT+xBQQhpuX73KGoG4xzlQiSzqS4mwMjUCBDCi7tgpmimhJuQL6RgsYd1q9cvfZZbiIg+YuYLd1y66wjx+RvUQCNAGJBC2gsYr/SQvrTjFGaOfj9/XwP1M=
  global:
  - COMMIT=${TRAVIS_COMMIT::7}
  - secure: gFp9Yq9ozH8oNLbyI7u6lnExPZvQRXEg92C09H8DEiw4ntT3hvfuAKQZD5vo6T2MjQ4imvUpXV4g8zPmWclKEOiPgboRoSA+astj9lt32YvXlGhrpDcYCU7JkddR61WrJDNhw8ye1WfOlmd5m1/HAPxD9EnUc+20PxMlEAu1O7hHjXmLBCIu67vVcFnYvh7tHpPqGHJD1hiDUWvaAae6p9bCvrkNesXSZW/xcaQoci+dwri6B2/7/+ocder87ZwJmJANhcrjRjWMuxh6XOMjY3Owof/m5Nd+F42F9/gEFBVU32Me6j/GoXqplv3q0aekjoVTGygx+T9ShPH6fhaqQfgA8Tlg75SZGr3Ar6YaZ56QsU53Wiv6RD8BUm7Q0Bft5ERh4S647oB0YOjPVxutNEY2nDgvhRddxs0eGoB0cF8QjMj0gHd/cRjQg04kYJSi/P6P5AP1hFNKLiu5TQiYzjVkdptbXgzmLzXCbq/p5Mn8lYZKcaf3ASYjAJwa4qVHjgCN/gfMr41slUu60Nv/D8pJqzlAvtJGXr6+XvcE80ujI6FnKic5aFSx/xdPwHz1SXFUwsxkp6DA1mELmsZFD2s3Ko/17t1ByczaBCF8c7Eg91RnXp/q/Rn3SyZ++TNnS5EPv80WB3eOs9A1yvur15MeP1mosgyO9D1WUQjt4oU=
after_success:
- export IMAGE_NAME=quay.io/noeloc/pathfinder
- docker login -u=$QUAY_USER -p=$QUAY_TOKEN quay.io
- docker build -t $IMAGE_NAME:$COMMIT .
- docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:latest
- docker push $IMAGE_NAME
